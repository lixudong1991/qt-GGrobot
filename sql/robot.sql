/*
SQLyog Ultimate v11.33 (32 bit)
MySQL - 5.7.20 : Database - robot
*********************************************************************
*/

/*!40101 SET NAMES utf8 */;

/*!40101 SET SQL_MODE=''*/;

/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;
CREATE DATABASE /*!32312 IF NOT EXISTS*/`robot` /*!40100 DEFAULT CHARACTER SET utf8 */;

USE `robot`;

/*Table structure for table `tbl_alarm` */

DROP TABLE IF EXISTS `tbl_alarm`;

CREATE TABLE `tbl_alarm` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '主键',
  `substationid` bigint(20) DEFAULT NULL COMMENT '上报数据主键',
  `alarmstatus` int(11) DEFAULT '0' COMMENT '告警状态',
  `uid` bigint(20) DEFAULT NULL COMMENT '用户id',
  `changetime` datetime DEFAULT NULL COMMENT '告警恢复时间',
  PRIMARY KEY (`id`),
  KEY `substationid` (`substationid`),
  KEY `uid` (`uid`),
  CONSTRAINT `tbl_alarm_ibfk_1` FOREIGN KEY (`substationid`) REFERENCES `tbl_substationdata` (`dataId`),
  CONSTRAINT `tbl_alarm_ibfk_2` FOREIGN KEY (`uid`) REFERENCES `tbl_users` (`userid`)
) ENGINE=InnoDB AUTO_INCREMENT=58 DEFAULT CHARSET=utf8;

/*Data for the table `tbl_alarm` */

insert  into `tbl_alarm`(`id`,`substationid`,`alarmstatus`,`uid`,`changetime`) values (1,2,1,1,'2018-02-06 15:39:20'),(2,4,1,1,'2018-02-06 15:39:20'),(3,8,1,1,'2018-02-06 15:39:20'),(4,7,0,1,'2018-02-06 14:37:51'),(5,14,1,1,'2018-02-06 15:39:20'),(6,15,1,1,'2018-02-06 15:39:20'),(7,18,1,1,'2018-02-06 15:39:20'),(8,19,1,1,'2018-02-06 15:39:20'),(9,19,1,1,'2018-02-06 15:39:20'),(11,21,1,1,'2018-02-08 09:19:36'),(12,22,1,1,'2018-02-08 09:23:01'),(13,23,1,1,'2018-02-08 09:22:59'),(14,24,1,1,'2018-02-08 09:22:56'),(15,25,1,1,'2018-02-08 09:22:52'),(16,26,1,1,'2018-02-08 09:41:43'),(17,27,1,1,'2018-02-08 09:44:39'),(18,28,1,1,'2018-02-08 09:56:41'),(19,31,1,1,'2018-02-08 12:09:27'),(20,32,1,1,'2018-02-08 12:09:27'),(21,33,1,1,'2018-02-08 17:10:11'),(22,34,1,1,'2018-02-08 17:10:11'),(23,35,1,1,'2018-02-08 17:10:11'),(24,36,1,1,'2018-02-08 17:10:11'),(25,37,1,1,'2018-02-08 17:10:11'),(26,38,1,1,'2018-02-08 17:10:11'),(27,39,1,1,'2018-02-08 17:10:11'),(28,40,1,1,'2018-02-08 17:10:11'),(29,41,1,1,'2018-02-08 17:10:11'),(30,42,1,1,'2018-02-08 17:10:11'),(31,43,1,1,'2018-02-08 18:07:56'),(32,44,1,1,'2018-02-08 18:07:56'),(33,45,1,1,'2018-02-08 18:07:56'),(34,46,1,1,'2018-02-08 18:07:56'),(35,47,1,1,'2018-02-08 18:07:56'),(36,48,1,1,'2018-02-08 18:07:56'),(37,49,1,1,'2018-02-08 18:07:56'),(38,50,1,1,'2018-02-09 10:04:16'),(39,51,1,1,'2018-02-09 10:04:16'),(40,52,1,1,'2018-02-09 10:04:16'),(41,53,1,1,'2018-02-09 10:04:16'),(42,54,1,1,'2018-02-09 10:04:16'),(43,55,1,1,'2018-02-09 10:04:16'),(44,56,1,1,'2018-02-09 10:04:16'),(45,57,1,1,'2018-02-09 10:04:16'),(46,58,1,1,'2018-02-09 10:04:16'),(47,59,1,1,'2018-02-09 10:04:16'),(48,60,1,1,'2018-02-09 10:05:53'),(49,61,1,1,'2018-02-10 11:46:52'),(50,62,1,1,'2018-02-10 11:46:52'),(51,63,1,1,'2018-02-10 11:46:52'),(52,64,1,1,'2018-02-10 11:53:45'),(53,65,1,1,'2018-02-10 11:57:06'),(54,66,1,1,'2018-02-10 12:00:08'),(55,67,1,1,'2018-02-10 13:48:14'),(56,68,1,1,'2018-02-10 13:49:39'),(57,69,0,-1,'2018-02-10 21:56:34');

/*Table structure for table `tbl_statusdata` */

DROP TABLE IF EXISTS `tbl_statusdata`;

CREATE TABLE `tbl_statusdata` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `terminalId` char(20) DEFAULT NULL COMMENT '设备唯一id',
  `reportTime` datetime DEFAULT NULL COMMENT '上报时间',
  `writeTime` datetime DEFAULT NULL COMMENT '写表时间',
  `electricitys` int(11) DEFAULT '125' COMMENT '电流，界面系数0.01',
  `voltage` int(11) DEFAULT '125' COMMENT '电压，界面系数0.01',
  `electricResidue` int(11) DEFAULT '125' COMMENT '当前机器人剩余总电量，界面单位%',
  `robotStatus` int(11) DEFAULT '125' COMMENT '机器人当前状态0自动1手动2停止',
  `radarFront` int(11) DEFAULT '125' COMMENT '前雷达0正常1异常',
  `radarBack` int(11) DEFAULT '125' COMMENT '后雷达0正常1异常',
  `magnetismFront` int(11) DEFAULT '125' COMMENT '前磁导航0正常1异常',
  `magnetismBack` int(11) DEFAULT '125' COMMENT '后磁导航0正常1异常',
  `cardReader` int(11) DEFAULT '125' COMMENT '地标读卡器0正常1异常',
  `autoDoor` int(11) DEFAULT '125' COMMENT '自动门状态0正常1异常',
  `charger` int(11) DEFAULT '125' COMMENT '充电器状态0正常1异常',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

/*Data for the table `tbl_statusdata` */

insert  into `tbl_statusdata`(`id`,`terminalId`,`reportTime`,`writeTime`,`electricitys`,`voltage`,`electricResidue`,`robotStatus`,`radarFront`,`radarBack`,`magnetismFront`,`magnetismBack`,`cardReader`,`autoDoor`,`charger`) values (1,'SV001','2018-02-10 21:51:47','2018-02-10 21:51:49',125,125,125,125,125,125,125,125,125,125,125),(2,'SV001','2018-02-10 22:18:52','2018-02-10 22:18:54',125,125,125,125,125,125,125,125,125,125,125),(3,'SV001','2018-02-10 22:37:48','2018-02-10 22:37:50',125,125,125,125,125,125,125,125,125,125,125);

/*Table structure for table `tbl_substationdata` */

DROP TABLE IF EXISTS `tbl_substationdata`;

CREATE TABLE `tbl_substationdata` (
  `dataId` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '数据自增id',
  `terminalId` char(20) NOT NULL COMMENT '设备唯一表示id',
  `reportTime` datetime NOT NULL COMMENT '数据上报时间',
  `writeTime` datetime NOT NULL COMMENT '数据写库时间',
  `pos` int(11) NOT NULL COMMENT '检测点位置',
  `sonPos` int(11) DEFAULT '-1' COMMENT '监测点子位置，默认-1表示没有子位置',
  `datatype` int(11) NOT NULL COMMENT '数据类型0开关状态1油位2红外3其它',
  `data` int(11) NOT NULL COMMENT '数据',
  `pictureType` int(11) NOT NULL COMMENT '图片类型0可见光1红外2其它',
  `pictureName` char(100) NOT NULL COMMENT '图片名称',
  PRIMARY KEY (`dataId`)
) ENGINE=InnoDB AUTO_INCREMENT=70 DEFAULT CHARSET=utf8;

/*Data for the table `tbl_substationdata` */

insert  into `tbl_substationdata`(`dataId`,`terminalId`,`reportTime`,`writeTime`,`pos`,`sonPos`,`datatype`,`data`,`pictureType`,`pictureName`) values (1,'SV001','2018-02-05 10:01:56','2018-02-05 10:01:56',1101,0,0,0,1,'b.jpg'),(2,'SV001','2018-02-05 11:03:58','2018-02-05 11:03:58',2094,19,2,6000,1,'20180108160112.jpg'),(3,'SV001','2018-02-05 11:06:17','2018-02-05 11:06:17',2093,20,2,4000,1,'20180108160112.jpg'),(4,'SV001','2018-02-05 11:06:52','2018-02-05 11:06:52',2093,20,2,5000,1,'20180108160112.jpg'),(5,'SV001','2018-02-05 16:09:10','2018-02-05 16:09:10',2093,19,2,5000,1,'20180108160112.jpg'),(6,'SV002','2018-02-05 16:09:32','2018-02-05 16:09:32',2093,19,2,5000,1,'20180108160112.jpg'),(7,'SV002','2018-02-05 16:09:45','2018-02-05 16:09:45',2093,19,2,5000,1,'20180108160112.jpg'),(8,'SV001','2018-02-05 16:11:58','2018-02-05 16:11:58',2093,19,2,5000,1,'20180108160112.jpg'),(9,'SV001','2018-02-06 09:45:51','2018-02-06 09:45:51',2093,20,2,5000,1,'20180108160112.jpg'),(10,'SV001','2018-02-06 09:48:03','2018-02-06 09:48:03',2093,19,2,5000,1,'20180108160112.jpg'),(11,'SV001','2018-02-06 09:54:35','2018-02-06 09:54:35',2093,19,2,5000,1,'20180108160112.jpg'),(12,'SV001','2018-02-06 09:56:33','2018-02-06 09:56:33',2093,18,2,5000,1,'20180108160112.jpg'),(13,'SV001','2018-02-06 10:03:55','2018-02-06 10:03:55',2093,18,2,5000,1,'20180108160112.jpg'),(14,'SV001','2018-02-06 10:14:02','2018-02-06 10:14:02',2093,19,2,5000,1,'20180108160112.jpg'),(15,'SV001','2018-02-06 10:33:39','2018-02-06 10:33:39',2093,20,2,5000,1,'20171221093144_ch01.jpg'),(16,'SV001','2018-02-06 11:07:13','2018-02-06 11:07:13',2093,20,2,5000,1,'20180108154902.jpg'),(17,'SV001','2018-02-06 11:07:49','2018-02-06 11:07:49',2093,20,2,5100,1,'20180108154902.jpg'),(18,'SV001','2018-02-06 11:08:56','2018-02-06 11:08:56',2093,20,2,5600,1,'20180108154902.jpg'),(19,'SV001','2018-02-06 11:54:08','2018-02-06 11:54:08',2093,20,2,5600,1,'20180108154902.jpg'),(20,'SV001','2018-02-07 18:43:34','2018-02-07 18:43:34',2093,20,2,5600,1,'20180108154902.jpg'),(21,'SV001','2018-02-07 18:44:34','2018-02-07 18:44:34',2093,20,2,5600,1,'20180108154902.jpg'),(22,'SV001','2018-02-08 09:19:18','2018-02-08 09:19:18',2093,20,2,5600,1,'20180108154902.jpg'),(23,'SV001','2018-02-08 09:20:39','2018-02-08 09:20:39',2093,20,2,5600,1,'20180108154902.jpg'),(24,'SV001','2018-02-08 09:20:54','2018-02-08 09:20:54',2093,20,2,5600,1,'20180108154902.jpg'),(25,'SV001','2018-02-08 09:22:37','2018-02-08 09:22:37',2093,20,2,5600,1,'20180108154902.jpg'),(26,'SV001','2018-02-08 09:41:14','2018-02-08 09:41:14',2093,20,2,5600,1,'20180108154902.jpg'),(27,'SV001','2018-02-08 09:44:11','2018-02-08 09:44:11',2093,20,2,5600,1,'20180108154902.jpg'),(28,'SV001','2018-02-08 09:56:25','2018-02-08 09:56:25',2093,20,2,5600,1,'20180108154902.jpg'),(29,'SVJ00017R001','2018-02-08 12:03:42','2018-02-08 12:03:42',2093,20,2,5600,1,'20180108154902.jpg'),(30,'SVJ00017R001','2018-02-08 12:04:26','2018-02-08 12:04:26',2093,20,2,5600,1,'20180108154902.jpg'),(31,'SV001','2018-02-08 12:05:19','2018-02-08 12:05:19',2093,20,2,5600,1,'20180108154902.jpg'),(32,'SV001','2018-02-08 12:09:10','2018-02-08 12:09:10',2093,20,2,5600,1,'20180108154902.jpg'),(33,'SV001','2018-02-08 16:11:29','2018-02-08 16:11:29',2093,20,2,5600,1,'20180108154902.jpg'),(34,'SV001','2018-02-08 16:13:50','2018-02-08 16:13:50',2093,20,2,5600,1,'20180108154902.jpg'),(35,'SV001','2018-02-08 16:15:23','2018-02-08 16:15:23',2093,20,2,5600,1,'20180108154902.jpg'),(36,'SV001','2018-02-08 16:18:23','2018-02-08 16:18:23',2093,20,2,5600,1,'20180108154902.jpg'),(37,'SV001','2018-02-08 16:22:00','2018-02-08 16:22:00',2093,20,2,5600,1,'20180108154902.jpg'),(38,'SV001','2018-02-08 16:24:13','2018-02-08 16:24:13',2093,20,2,5600,1,'20180108154902.jpg'),(39,'SV001','2018-02-08 16:41:28','2018-02-08 16:41:28',2093,20,2,5600,1,'20180108154902.jpg'),(40,'SV001','2018-02-08 16:49:19','2018-02-08 16:49:19',2093,20,2,5600,1,'20180108154902.jpg'),(41,'SV001','2018-02-08 17:06:03','2018-02-08 17:06:03',2093,20,2,5600,1,'20180108154902.jpg'),(42,'SV001','2018-02-08 17:09:24','2018-02-08 17:09:24',2093,20,2,5600,1,'20180108154902.jpg'),(43,'SV001','2018-02-08 17:22:30','2018-02-08 17:22:30',2093,20,2,5600,1,'20180108154902.jpg'),(44,'SV001','2018-02-08 17:23:57','2018-02-08 17:23:57',2093,20,2,5600,1,'20180108154902.jpg'),(45,'SV001','2018-02-08 17:33:38','2018-02-08 17:33:38',2093,20,2,5600,1,'20180108154902.jpg'),(46,'SV001','2018-02-08 17:33:58','2018-02-08 17:33:58',2093,20,2,5600,1,'20180108154902.jpg'),(47,'SV001','2018-02-08 17:41:35','2018-02-08 17:41:35',2093,20,2,5600,1,'20180108154902.jpg'),(48,'SV001','2018-02-08 17:46:16','2018-02-08 17:46:16',2093,20,2,5600,1,'20180108154902.jpg'),(49,'SV001','2018-02-08 18:07:35','2018-02-08 18:07:35',2093,20,2,5600,1,'20180108154902.jpg'),(50,'SV001','2018-02-08 18:16:51','2018-02-08 18:16:51',2093,20,2,5600,1,'20180108154902.jpg'),(51,'SV001','2018-02-09 09:07:55','2018-02-09 09:07:55',2093,20,2,5600,1,'20180108154902.jpg'),(52,'SV001','2018-02-09 09:24:53','2018-02-09 09:24:53',2093,20,2,5600,1,'20180108154902.jpg'),(53,'SV001','2018-02-09 09:44:37','2018-02-09 09:44:37',2093,20,2,5600,1,'20180108154902.jpg'),(54,'SV001','2018-02-09 09:47:48','2018-02-09 09:47:48',2093,20,2,5600,1,'20180108154902.jpg'),(55,'SV001','2018-02-09 09:50:21','2018-02-09 09:50:21',2093,20,2,5600,1,'20180108154902.jpg'),(56,'SV001','2018-02-09 09:50:50','2018-02-09 09:50:50',2093,20,2,5600,1,'20180108154902.jpg'),(57,'SV001','2018-02-09 09:58:36','2018-02-09 09:58:36',2093,20,2,5600,1,'20180108154902.jpg'),(58,'SV001','2018-02-09 10:01:26','2018-02-09 10:01:26',2093,20,2,5600,1,'20180108154902.jpg'),(59,'SV001','2018-02-09 10:03:57','2018-02-09 10:03:57',2093,20,2,5600,1,'20180108154902.jpg'),(60,'SV001','2018-02-09 10:05:01','2018-02-09 10:05:01',2093,20,2,5600,1,'20180108154902.jpg'),(61,'SV001','2018-02-10 11:40:22','2018-02-10 11:40:22',2093,20,2,5600,1,'20180108154902.jpg'),(62,'SV001','2018-02-10 11:43:19','2018-02-10 11:43:19',2093,20,2,5600,1,'20180108154902.jpg'),(63,'SV001','2018-02-10 11:46:39','2018-02-10 11:46:39',2093,20,2,5600,1,'20180108154902.jpg'),(64,'SV001','2018-02-10 11:53:28','2018-02-10 11:53:28',2093,20,2,5600,1,'20180108154902.jpg'),(65,'SV001','2018-02-10 11:56:57','2018-02-10 11:56:57',2093,20,2,5600,1,'20180108154902.jpg'),(66,'SV001','2018-02-10 12:00:00','2018-02-10 12:00:00',2093,20,2,5600,1,'20180108154902.jpg'),(67,'SV001','2018-02-10 13:48:05','2018-02-10 13:48:05',2093,20,2,5600,1,'20180108154902.jpg'),(68,'SV001','2018-02-10 13:49:21','2018-02-10 13:49:21',2093,20,2,5600,1,'20180108154902.jpg'),(69,'SV001','2018-02-10 21:56:29','2018-02-10 21:56:29',2093,20,2,5600,1,'20180108154902.jpg');

/*Table structure for table `tbl_users` */

DROP TABLE IF EXISTS `tbl_users`;

CREATE TABLE `tbl_users` (
  `userid` bigint(20) NOT NULL AUTO_INCREMENT,
  `createDate` datetime NOT NULL COMMENT '创建日期',
  `modifDate` datetime NOT NULL COMMENT '修改日期',
  `userName` char(20) NOT NULL COMMENT '用户名',
  `userPwd` char(18) NOT NULL COMMENT '用户密码',
  `userAuth` int(11) NOT NULL DEFAULT '1' COMMENT '权限等级0管理员1普通2其它',
  PRIMARY KEY (`userid`)
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

/*Data for the table `tbl_users` */

insert  into `tbl_users`(`userid`,`createDate`,`modifDate`,`userName`,`userPwd`,`userAuth`) values (-1,'2018-02-07 18:44:02','2018-02-07 18:44:04','root','root',0),(1,'2017-12-08 17:07:48','2017-12-08 17:07:48','test','123456',1),(2,'2017-12-09 15:14:20','2017-12-09 15:14:20','abc','123',1),(3,'2017-12-09 15:14:47','2017-12-16 09:33:25','a','123',1);

/*Table structure for table `tbl_userterminal` */

DROP TABLE IF EXISTS `tbl_userterminal`;

CREATE TABLE `tbl_userterminal` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `createDate` datetime NOT NULL COMMENT '添加日期',
  `modifDate` datetime DEFAULT NULL COMMENT '修改日期',
  `userid` bigint(20) NOT NULL COMMENT '用户表中用户id',
  `terminalId` char(20) NOT NULL COMMENT '设备唯一标识id',
  `terminalIp` char(20) NOT NULL COMMENT '工控机ip',
  `terminalPort` char(10) NOT NULL COMMENT '工控机prot',
  `cloudIp` char(20) NOT NULL COMMENT '云台Ip',
  `cloudPort` char(10) NOT NULL COMMENT '云台Port',
  `cloudUserName` char(50) NOT NULL COMMENT '云台用户名',
  `cloudUserPwd` char(30) NOT NULL COMMENT '云台登录密码',
  `infraredIp` char(20) NOT NULL COMMENT '红外摄像机IP地址',
  `ownerUnit` char(200) DEFAULT NULL COMMENT '设备使用单位',
  `remark` char(200) DEFAULT NULL COMMENT '设备备注信息',
  `posSize` int(11) DEFAULT NULL COMMENT '视觉监测点位置个数，不包含子位置',
  PRIMARY KEY (`id`,`terminalId`)
) ENGINE=InnoDB AUTO_INCREMENT=25 DEFAULT CHARSET=utf8;

/*Data for the table `tbl_userterminal` */

insert  into `tbl_userterminal`(`id`,`createDate`,`modifDate`,`userid`,`terminalId`,`terminalIp`,`terminalPort`,`cloudIp`,`cloudPort`,`cloudUserName`,`cloudUserPwd`,`infraredIp`,`ownerUnit`,`remark`,`posSize`) values (23,'2018-01-06 18:45:58','2018-01-06 18:45:59',1,'SV001','192.168.1.41','10000','192.168.1.64','8000','admin','admin888','192.168.1.160',NULL,NULL,30),(24,'2018-02-06 15:24:03','2018-02-06 15:24:05',1,'SVJ00017R001','192.168.1.41','10000','192.168.1.64','8000','admin','admin888','192.168.1.160',NULL,NULL,104);

/* Procedure structure for procedure `add_myta` */

/*!50003 DROP PROCEDURE IF EXISTS  `add_myta` */;

DELIMITER $$

/*!50003 CREATE DEFINER=`root`@`localhost` PROCEDURE `add_myta`()
BEGIN
    DECLARE i INT;
    SET i=0;
    WHILE(i<=1000)DO
    INSERT INTO `robot`.`tbl_substationdata`  VALUES (DEFAULT,'SV001',NOW(), NOW(), 2, 0,0,i,0,'g.jpg'); 
    SET i=i+1;
    END WHILE;
END */$$
DELIMITER ;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;
